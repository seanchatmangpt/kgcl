<?xml version="1.0" encoding="UTF-8"?>
<specificationSet xmlns="http://www.yawlfoundation.org/yawlschema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="{{ specification_version }}" xsi:schemaLocation="http://www.yawlfoundation.org/yawlschema http://www.yawlfoundation.org/yawlschema/YAWL_Schema{{ specification_version }}.xsd">
  <specification uri="{{ workflow_uri }}">
    <metaData>
      <title>{{ workflow_name }}</title>
      <creator>KGCL Code Generator</creator>
      <description>Generated from RDF ontology</description>
      <version>1.0</version>
      <persistent>false</persistent>
      <identifier>{{ workflow_uri }}</identifier>
    </metaData>
    <schema xmlns="http://www.w3.org/2001/XMLSchema" />
    <decomposition id="{{ workflow_name }}" isRootNet="true" xsi:type="NetFactsType">
      <processControlElements>
        <inputCondition id="InputCondition">
          <name>IN</name>
          <flowsInto>
            {% if conditions %}
            <nextElementRef id="{{ conditions[0].id }}" />
            {% elif tasks %}
            <nextElementRef id="{{ tasks[0].id }}" />
            {% endif %}
          </flowsInto>
        </inputCondition>

        {% for task in tasks %}
        <task id="{{ task.id }}">
          <name>{{ task.name }}</name>
          {% if task.decomposition %}
          <decomposesTo id="{{ task.decomposition }}" />
          {% endif %}
          {% for flow in flows %}
          {% if flow.source == task.id %}
          <flowsInto>
            <nextElementRef id="{{ flow.target }}" />
          </flowsInto>
          {% endif %}
          {% endfor %}
        </task>
        {% endfor %}

        {% for condition in conditions %}
        <condition id="{{ condition.id }}">
          <name>{{ condition.name }}</name>
          {% for flow in flows %}
          {% if flow.source == condition.id %}
          <flowsInto>
            <nextElementRef id="{{ flow.target }}" />
          </flowsInto>
          {% endif %}
          {% endfor %}
        </condition>
        {% endfor %}

        <outputCondition id="OutputCondition">
          <name>OUT</name>
        </outputCondition>
      </processControlElements>
    </decomposition>
  </specification>
  <layout>
    <locale language="en" country="US"/>
    <specification id="{{ workflow_uri }}">
      <size w="1000" h="800"/>
      <net id="{{ workflow_name }}">
        <bounds x="0" y="0" w="1000" h="800"/>
        {% for task in tasks %}
        <container id="{{ task.id }}">
          <vertex>
            <attributes>
              <bounds x="{{ loop.index * 150 }}" y="200" w="100" h="50"/>
            </attributes>
          </vertex>
          <label>
            <attributes>
              <bounds x="{{ loop.index * 150 }}" y="170" w="100" h="20"/>
            </attributes>
          </label>
        </container>
        {% endfor %}
      </net>
    </specification>
  </layout>
</specificationSet>
