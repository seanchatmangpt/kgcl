<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="732px" preserveAspectRatio="none" style="width:824px;height:732px;background:#FFFFFF;" version="1.1" viewBox="0 0 824 732" width="824px" zoomAndPan="magnify"><title>KGCL Daemon - Dynamic: Add Triple with Hook Execution</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="419.8496" x="201.1418" y="28.5352">KGCL Daemon - Dynamic: Add Triple with Hook Execution</text><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="623.1875" width="8" x="27.7524" y="73.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="31" x2="31" y1="73.9766" y2="697.1641"/></g><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="623.1875" width="8" x="192.3481" y="73.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="196.0591" x2="196.0591" y1="73.9766" y2="697.1641"/></g><g><title>Matter Layer</title><rect fill="#000000" fill-opacity="0.00000" height="623.1875" width="8" x="339.1724" y="73.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="343.0425" x2="343.0425" y1="73.9766" y2="697.1641"/></g><g><title>Hook Executor</title><rect fill="#000000" fill-opacity="0.00000" height="623.1875" width="8" x="501.0376" y="73.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="504.2891" x2="504.2891" y1="73.9766" y2="697.1641"/></g><g><title>Physics Layer</title><rect fill="#000000" fill-opacity="0.00000" height="623.1875" width="8" x="709.1821" y="73.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="712.3315" x2="712.3315" y1="73.9766" y2="697.1641"/></g><g><title>WAL</title><rect fill="#000000" fill-opacity="0.00000" height="623.1875" width="8" x="792.583" y="73.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="796.0327" x2="796.0327" y1="73.9766" y2="697.1641"/></g><g class="participant participant-head" data-participant="client"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53.5049" x="5" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5049" x="12" y="63.0234">Client</text></g><g class="participant participant-tail" data-participant="client"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53.5049" x="5" y="696.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5049" x="12" y="716.6992">Client</text></g><g class="participant participant-head" data-participant="api"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96.5781" x="148.0591" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.5781" x="155.0591" y="63.0234">API Gateway</text></g><g class="participant participant-tail" data-participant="api"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96.5781" x="148.0591" y="696.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.5781" x="155.0591" y="716.6992">API Gateway</text></g><g class="participant participant-head" data-participant="matter"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98.2598" x="294.0425" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.2598" x="301.0425" y="63.0234">Matter Layer</text></g><g class="participant participant-tail" data-participant="matter"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98.2598" x="294.0425" y="696.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.2598" x="301.0425" y="716.6992">Matter Layer</text></g><g class="participant participant-head" data-participant="hooks"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113.4971" x="448.2891" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.4971" x="455.2891" y="63.0234">Hook Executor</text></g><g class="participant participant-tail" data-participant="hooks"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113.4971" x="448.2891" y="696.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.4971" x="455.2891" y="716.6992">Hook Executor</text></g><g class="participant participant-head" data-participant="physics"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.7012" x="661.3315" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.7012" x="668.3315" y="63.0234">Physics Layer</text></g><g class="participant participant-tail" data-participant="physics"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.7012" x="661.3315" y="696.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.7012" x="668.3315" y="716.6992">Physics Layer</text></g><g class="participant participant-head" data-participant="wal"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43.1006" x="775.0327" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.1006" x="782.0327" y="63.0234">WAL</text></g><g class="participant participant-tail" data-participant="wal"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43.1006" x="775.0327" y="696.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.1006" x="782.0327" y="716.6992">WAL</text></g><g class="message" data-participant-1="client" data-participant-2="api"><polygon fill="#666666" points="184.3481,128.375,194.3481,132.375,184.3481,136.375,188.3481,132.375" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="31.7524" x2="190.3481" y1="132.375" y2="132.375"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="30.0059" x="43.7524" y="99.5781">POST</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="73.7583" y="99.5781">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28.0254" x="77.5552" y="99.5781">/add</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="105.5806" y="99.5781">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="22.7813" x="109.3774" y="99.5781">{"s":</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="132.1587" y="99.5781">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="48.3926" x="135.9556" y="99.5781">"task:1",</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20.3145" x="66.0063" y="113.7109">"p":</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="86.3208" y="113.7109">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="48.0469" x="90.1177" y="113.7109">"status",</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="138.1646" y="113.7109">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20.1328" x="141.9614" y="113.7109">"o":</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="68.625" x="79.7378" y="127.8438">"Complete"}</text></g><g class="message" data-participant-1="api" data-participant-2="matter"><polygon fill="#666666" points="331.1724,156.5078,341.1724,160.5078,331.1724,164.5078,335.1724,160.5078" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="196.3481" x2="337.1724" y1="160.5078" y2="160.5078"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="111.5801" x="213.9702" y="155.9766">begin_transaction()</text></g><g class="message" data-participant-1="matter" data-participant-2="wal"><polygon fill="#666666" points="784.583,184.6406,794.583,188.6406,784.583,192.6406,788.583,188.6406" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="343.1724" x2="790.583" y1="188.6406" y2="188.6406"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92.3027" x="504.5896" y="184.1094">log_intent(ADD,</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="596.8923" y="184.1094">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34.4766" x="600.6892" y="184.1094">triple)</text></g><g class="message" data-participant-1="api" data-participant-2="matter"><polygon fill="#666666" points="331.1724,212.7734,341.1724,216.7734,331.1724,220.7734,335.1724,216.7734" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="196.3481" x2="337.1724" y1="216.7734" y2="216.7734"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60.1113" x="239.7046" y="212.2422">add(triple)</text></g><g class="message" data-participant-1="matter" data-participant-2="hooks"><polygon fill="#666666" points="493.0376,255.0391,503.0376,259.0391,493.0376,263.0391,497.0376,259.0391" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="343.1724" x2="499.0376" y1="259.0391" y2="259.0391"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="119.4609" x="364.3745" y="240.375">emit(TRIPLE_ADDED,</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34.4766" x="406.8667" y="254.5078">triple)</text></g><g class="message" data-participant-1="hooks" data-participant-2="hooks"><line style="stroke:#666666;stroke-width:1;" x1="505.0376" x2="547.0376" y1="287.1719" y2="287.1719"/><line style="stroke:#666666;stroke-width:1;" x1="547.0376" x2="547.0376" y1="287.1719" y2="300.1719"/><line style="stroke:#666666;stroke-width:1;" x1="506.0376" x2="547.0376" y1="300.1719" y2="300.1719"/><polygon fill="#666666" points="516.0376,296.1719,506.0376,300.1719,516.0376,304.1719,512.0376,300.1719" style="stroke:#666666;stroke-width:1;"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="194.1445" x="512.0376" y="282.6406">evaluate_conditions(pre-validate)</text></g><g class="message" data-participant-1="hooks" data-participant-2="matter"><polygon fill="#666666" points="354.1724,338.4375,344.1724,342.4375,354.1724,346.4375,350.1724,342.4375" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="348.1724" x2="504.0376" y1="342.4375" y2="342.4375"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44.6836" x="357.3462" y="323.7734">SPARQL</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="402.0298" y="323.7734">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="22.5762" x="405.8267" y="323.7734">ASK</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="428.4028" y="323.7734">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58.6641" x="432.1997" y="323.7734">(condition</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="37.3418" x="405.4341" y="337.9063">check)</text></g><g class="message" data-participant-1="matter" data-participant-2="hooks"><polygon fill="#666666" points="493.0376,366.5703,503.0376,370.5703,493.0376,374.5703,497.0376,370.5703" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;stroke-dasharray:2,2;" x1="343.1724" x2="499.0376" y1="370.5703" y2="370.5703"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="23.5313" x="412.3394" y="366.0391">true</text></g><g class="message" data-participant-1="hooks" data-participant-2="physics"><polygon fill="#666666" points="701.1821,408.8359,711.1821,412.8359,701.1821,416.8359,705.1821,412.8359" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="505.0376" x2="707.1821" y1="412.8359" y2="412.8359"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="123.2988" x="547.4604" y="394.1719">reason(current_state,</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="61.4766" x="578.3716" y="408.3047">wcp_rules)</text></g><g class="message" data-participant-1="physics" data-participant-2="hooks"><polygon fill="#666666" points="516.0376,436.9688,506.0376,440.9688,516.0376,444.9688,512.0376,440.9688" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;stroke-dasharray:2,2;" x1="510.0376" x2="712.1821" y1="440.9688" y2="440.9688"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96.5684" x="560.8257" y="436.4375">inferred_triples[]</text></g><g class="message" data-participant-1="hooks" data-participant-2="matter"><polygon fill="#666666" points="354.1724,465.1016,344.1724,469.1016,354.1724,473.1016,350.1724,469.1016" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="348.1724" x2="504.0376" y1="469.1016" y2="469.1016"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137.8652" x="355.1724" y="464.5703">add_all(inferred_triples)</text></g><g class="message" data-participant-1="matter" data-participant-2="wal"><polygon fill="#666666" points="784.583,507.3672,794.583,511.3672,784.583,515.3672,788.583,511.3672" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="343.1724" x2="790.583" y1="511.3672" y2="511.3672"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92.3027" x="523.7263" y="492.7031">log_intent(ADD,</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="57.7793" x="540.988" y="506.8359">inferred[])</text></g><g class="message" data-participant-1="hooks" data-participant-2="hooks"><line style="stroke:#666666;stroke-width:1;" x1="505.0376" x2="547.0376" y1="539.5" y2="539.5"/><line style="stroke:#666666;stroke-width:1;" x1="547.0376" x2="547.0376" y1="539.5" y2="552.5"/><line style="stroke:#666666;stroke-width:1;" x1="506.0376" x2="547.0376" y1="552.5" y2="552.5"/><polygon fill="#666666" points="516.0376,548.5,506.0376,552.5,516.0376,556.5,512.0376,552.5" style="stroke:#666666;stroke-width:1;"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="134.4258" x="512.0376" y="534.9688">execute_actions(notify)</text></g><g class="message" data-participant-1="api" data-participant-2="matter"><polygon fill="#666666" points="331.1724,576.6328,341.1724,580.6328,331.1724,584.6328,335.1724,580.6328" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="196.3481" x2="337.1724" y1="580.6328" y2="580.6328"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122.8242" x="208.3481" y="576.1016">commit_transaction()</text></g><g class="message" data-participant-1="matter" data-participant-2="wal"><polygon fill="#666666" points="784.583,604.7656,794.583,608.7656,784.583,612.7656,788.583,608.7656" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="343.1724" x2="790.583" y1="608.7656" y2="608.7656"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="36.6973" x="551.5291" y="604.2344">flush()</text></g><g class="message" data-participant-1="matter" data-participant-2="api"><polygon fill="#666666" points="207.3481,647.0313,197.3481,651.0313,207.3481,655.0313,203.3481,651.0313" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;stroke-dasharray:2,2;" x1="201.3481" x2="342.1724" y1="651.0313" y2="651.0313"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="86.2852" x="219.0269" y="632.3672">Receipt{added:</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="305.312" y="632.3672">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="11.3848" x="309.1089" y="632.3672">1,</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49.8691" x="237.1821" y="646.5">inferred:</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="287.0513" y="646.5">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="11.4902" x="290.8481" y="646.5">3}</text></g><g class="message" data-participant-1="api" data-participant-2="client"><polygon fill="#666666" points="42.7524,675.1641,32.7524,679.1641,42.7524,683.1641,38.7524,679.1641" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;stroke-dasharray:2,2;" x1="36.7524" x2="195.3481" y1="679.1641" y2="679.1641"/><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="22.7637" x="66.4224" y="674.6328">200</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="89.186" y="674.6328">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="17.1563" x="92.9829" y="674.6328">OK</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="110.1392" y="674.6328">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="47.7422" x="113.936" y="674.6328">{receipt}</text></g><!--SRC=[XLF1Rfj04Btp5LDEMB9DqlQqXqh8jjB8HA6ngnwY2AsNjLbvWTNkKDUoykyTmAuXgTeRE_FcpPitmmTL2brd4d94urWOMdwOxXJczQPsqeggH5dYL5H5Q3GliIxqn66crIQSVPuaJUZxGnmMtA6q54hdnv8NIamD8JqF5Me9oxjP37CkYwg42PmH3A8iWxLLXX07wWXVgseFYrzIrAYgqlCCjwY4CjG3_9bM9CG7xa2qdyDqbDp37KTvuCSMmuqQ0XuuaaA8-L7Q5b6qWI6efw3gK3b5t12Kv4UdXEjHcIuoXFs8uZPvuEH39nacNnfX39B7rHf2JlEVVESpy96xFRlrn-2RvkcGO-sQPzKyPrL19g7qNpqgRrWwyGmsSgVA52ql7HUDQy78wt8DYbepqDKkLUqMWsW-7mEsZe_UCf6Ou9AwChJZCv25mc3zT9_4YvH85ZsQ5j67_kIwfaMaT3gPQYIvm5WveR3AADwhkBHU9T7JjnYYrHA2FrKWSYdsLotN3cXhUIKvUy_0IkveVb5RIxEcZOLo30TXKbjhwKRU6TcdKkLM4ZnBksdSyyjxTMHCohKEtcB_Q_IbuFdbBowrDoRJRcakA2jKs-ExfT1lHyx_UxzRNRiy61ZLtjYJ558PF95-cJ6ulGfYyEbyI8JjBfF1nviRU5p2oNPbhzvl]--></g></svg>