@startuml C1_SystemContext
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

title System Context: The Chatman Equation (A = \u03bc(O, P))

LAYOUT_WITH_LEGEND()

Person(chatman, "Chatman Agent", "The Observer/Navigator.\nProvides Observation (O) as JSON payload.")

System(kgc_engine, "KGC Interoperability Validator", "The Atman/Physics Engine (\u03bc).\nExecutes topology as physics.\n5 Elemental Verbs + Ontology Resolution.")

System_Ext(ontology, "Dark Matter (Ontology)", "kgc_physics.ttl - 43 YAWL pattern mappings\ninvariants.shacl.ttl - Three Laws (TYPING, HERMETICITY, CHRONOLOGY)")

System_Ext(legacy, "Legacy Systems", "External APIs, Databases, Webhooks.\nSide effects from Transmute/Copy verbs.")

Rel(chatman, kgc_engine, "Submits Observation (O)", "JSON/Payload\nvia BBB Ingress")
Rel(kgc_engine, chatman, "Returns Receipt (A)", "Cryptographic Proof\nmerkle_root + verb_executed")

Rel(kgc_engine, ontology, "Resolves Verb + Parameters", "SPARQL Queries\nkgc:pattern \u2192 kgc:verb")
Rel(kgc_engine, legacy, "Transmutes/Copies Data", "HTTP/RPC\nSide Effects")

note right of kgc_engine
  **The Semantic Singularity Principle**
  "Validation IS Execution"

  - No arbitrary Python logic
  - Logic lives in kgc_physics.ttl
  - 43 patterns \u2192 5 verbs (8.2:1 compression)
end note

note bottom of ontology
  **Chatman Constant = 64**
  Max operations per batch (Hot Path limit)
end note

@enduml
